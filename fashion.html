<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Fit Check | Rate My Drip</title>
    <link rel="stylesheet" href="style.css">
    
</head>
<body>
    <div class="container fashion-page">
        <h1>Fit Check AI <span class="tag">Gen Z Mode</span></h1>
        <p id="status">Upload your fit for a vibe check.</p>

        <div class="upload-zone">
            <input type="file" id="fashionUpload" accept="image/*" hidden>
            <label for="fashionUpload" class="btn-primary">Post to AI</label>
        </div>

        <div id="fashionPreview" class="preview-box">
            <img id="outfitImg" style="display:none; width: 100%; border-radius: 15px;">
        </div>

        <div id="fashionResults" style="display:none;">
            <div class="rating-display">
                <h2 id="fitScore">0/10</h2>
                <p id="slangComment"></p>
            </div>
            <button onclick="location.href='index.html'" class="btn-secondary">Back to Face Scan</button>
        </div>
    </div>

    <script>
        const fashionUpload = document.getElementById('fashionUpload');
const slangComment = document.getElementById('slangComment');
const fitScore = document.getElementById('fitScore');
const status = document.getElementById('status');

fashionUpload.addEventListener('change', (e) => {
    const file = e.target.files[0];
    const reader = new FileReader();
    
    status.innerText = "Extracting color palette...";

    reader.onload = (event) => {
        const img = new Image();
        img.src = event.target.result;
        
        img.onload = () => {
            // Display the image
            const displayImg = document.getElementById('outfitImg');
            displayImg.src = img.src;
            displayImg.style.display = 'block';

            // ANALYZE COLORS
            const color = getAverageRGB(img);
            const vibe = getColorVibe(color.r, color.g, color.b);

            // AI Processing Delay for effect
            setTimeout(() => {
                fitScore.innerText = `${vibe.score}/10`;
                slangComment.innerText = vibe.comment;
                
                // Change the border color to match your clothes!
                document.querySelector('.rating-display').style.borderColor = `rgb(${color.r},${color.g},${color.b})`;
                
                document.getElementById('fashionResults').style.display = 'block';
                status.innerText = "Vibe Check Complete.";
            }, 1500);
        };
    };
    reader.readAsDataURL(file);
});

// Function to "see" the colors in the photo
function getAverageRGB(imgEl) {
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = 50; // Small scale for speed
    canvas.height = 50;
    ctx.drawImage(imgEl, 0, 0, 50, 50);
    
    const data = ctx.getImageData(0, 0, 50, 50).data;
    let r = 0, g = 0, b = 0;

    for (let i = 0; i < data.length; i += 4) {
        r += data[i];
        g += data[i+1];
        b += data[i+2];
    }

    const pixels = data.length / 4;
    return { r: Math.floor(r/pixels), g: Math.floor(g/pixels), b: Math.floor(b/pixels) };
}

// Logic to turn colors into Gen Z comments
function getColorVibe(r, g, b) {
    // Detect "Dark/Emo" vibes
    if (r < 60 && g < 60 && b < 60) {
        return { score: 9, comment: "Giving 'Streetwear Shadow' vibes. Very opium, very clean. üñ§" };
    }
    // Detect "Bright/Neon" vibes
    if (r > 200 || g > 200 || b > 200) {
        return { score: 8, comment: "Main character energy with these colors. You're literally glowing. ‚ú®" };
    }
    // Detect "Earth Tones" (Browns/Greens)
    if (r > g && g > b) {
        return { score: 7, comment: "The aesthetic is very 'Old Money' or 'Granola Core'. Respect. üåø" };
    }
    // Default
    return { score: 6, comment: "A solid basic fit. It's giving clean girl/boy aesthetic. Minimalist win. ‚òÅÔ∏è" };
}
    </script>
</body>
</html>
